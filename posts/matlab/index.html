<!doctype html><html><head><title>Robocup</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><link rel=icon type=image/png href=/images/site/logo.svg><link rel=stylesheet href=/css/style.css><meta name=description content="Virtual manipulator challenge"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-122321624-2','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/logo.svg alt=Logo>Sebastian D ðŸ‡¨ðŸ‡´</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=languageSelector role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span class="flag-icon flag-icon-gb"></span>English</a><div class=dropdown-menu aria-labelledby=languageSelector><a class="dropdown-item nav-link languages-item" href=/es/posts/matlab><span class="flag-icon flag-icon-es"></span>Spanish</a></div></li></ul></div></div><img src=/images/site/logo.svg class=d-none id=main-logo alt=Logo>
<img src=/images/site/inverted-logo.svg class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=https://jsduenass.github.io/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><a href=/posts/meta/ title=About>About</a></li><li><a href=/posts/data-analysis/datacademy/ title=Datacademy>Datacademy</a></li><li><a class=active href=/posts/matlab/ title=MATLAB>MATLAB</a></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://jsduenass.github.io/posts/matlab/hero.png)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/Sebastian.png alt="Author Image"><h5 class=author-name>Juan Sebastian DueÃ±as</h5><p>May 19, 2021</p></div><div class=title><h1>Robocup</h1></div><div class=post-content id=post-content><h2 id=resources>Resources</h2><ul><li><a href=https://2021.robocup.org/robot-manipulation>Virtual manipulator challenge main page</a></li><li><a href=https://atwork.robocup.org/2021/03/12/robocup-2021-worldwide-call-for-participation/>robocup@work team qualifications</a></li><li><a href=https://github.com/mathworks-robotics/templates-robocup-robot-manipulation-challenge>github getting started</a></li><li><a href=https://www.facebook.com/notes/matlab-and-simulink-robotics-arena/design-and-control-of-robot-manipulators-technical-resources/3351011848336733/>Design and Control of Robot Manipulators</a></li><li><a href=https://www.mathworks.com/help/ros/ug/get-started-with-gazebo-and-a-simulated-turtlebot.html>get started with gazebo</a></li></ul><h2 id=about-the-system>About the system</h2><p>The work is based on the vmware virtual machine provided by the github getting started. It contains:</p><ul><li>ROS 2 Dashing desktop installation</li><li>ROS Melodic desktop installation</li><li>Gazebo robot simulator 9.0.0</li><li>Example Gazebo worlds for a simulated TurtleBotÂ® 3</li></ul><p>Checking the version of the software packages</p><pre><code>lsb_release -a
gazebo -v
</code></pre><ul><li>ubunto version: 18.04.5</li><li>gazebo version 9.16.0</li></ul><p>The project uses ros_kortex robotic arm for the virtual manipulator</p><p>The virtualization platform used was virtual box instead of vmware workstation</p><h2 id=config>Config</h2><ul><li><p>running and testing the vm (virtual machine) works</p></li><li><p>take a snapshot of the vm in order to have a backup to go back to if something goes wrong.</p></li><li><p>using virtual box Guest additions to get full-screen</p></li><li><p>activate share clipboard to copy paste to work between both in host and guest</p></li><li><p>add <a href=https://askubuntu.com/questions/1014585/how-to-add-a-latin-american-keyboard-in-17-10>Spanish keyboard</a>: changing the default keyboard layout from English to Spanish simplifies the use of special characters</p><pre><code>sudo locale-gen es_AR.UTF-8
</code></pre></li><li><p>Configure Network between guest and host. Enable network adapter with <strong>NAT</strong> configuration and allow port forwarding in advance settings. The port 11311 needs to be forward in order for the host computer to connect to ROS network. NAT (Network Adress Translation) creates a private network for the guest vm.</p></li></ul><p><img src=network-config.png alt="Network configuration"></p><ul><li>Check the virtual box network tool to identify network adaptor of the host computer <code>192.168.56.1</code></li></ul><h2 id=environment-exploration>Environment exploration</h2><p>Files related to the project are located at the Desktop inside the Robocup Challenge folder. Exploring these files ( <code>Example World 1.desktop</code>) from the command line give an insight in how they work</p><pre><code>cd &quot;Desktop/RoboCup Challenge&quot;
less &quot;Example World 1.desktop&quot;
</code></pre><p>Content of <code>Example World 1.desktop</code>:</p><pre><code>[Desktop Entry]
Version=1.0
Comment=Launch example world for RoboCup challenge
Exec=/home/user/start-robocup-example-world-1.sh
Terminal=false
Type=Application
Categories=Utility;Application;
Icon=/usr/share/icons/Tango/32x32/mimetypes/gnome-mime-application-x-executable.png
Name[en_US]=Example World 1
</code></pre><p>This file launches a shell script <code>~/start-robocup-example-world-1.sh</code></p><pre><code>less ~/start-robocup-example-world-1.sh
</code></pre><p>Content of <code>~/start-robocup-example-world-1.sh</code>:</p><pre><code>#!/bin/sh
# Shortcut shell script to start pickandplace recycling world
export SVGA_VGPU10=0
export ROS_IP=$(hostname -I | tr -d [:blank:])
export ROS_MASTER_URI=http://$ROS_IP:11311
export GAZEBO_PLUGIN_PATH=/home/user/src/GazeboPlugin/export:$GAZEBO_PLUGIN_PATH
# Launch Gazebo world with kortex
gnome-terminal --title=&quot;Gazebo Recycling World - Depth Sensing&quot; -- /bin/bash -c 'source /opt/ros/melodic/setup.bash; source ~/catkin_ws/devel/setup.bash; roslaunch kortex_gazebo_depth pickplace.launch world:=RoboCup_1.world '
</code></pre><p>This file open a gazebo world from the ROS project found at <code>~/catkin_ws/</code></p><p>search for the robot model (urdf)</p><pre><code>cd ~/catkin_ws
ls -R | grep urdf
</code></pre><p><code>./src/ros_kortex/kortex_description/arms/gen3/urdf</code></p><h3 id=connect-to-matlab>Connect to MATLAB</h3><ul><li>Select on of the available gazebo files on the desktop, it would run a gazebo world.</li><li>Run <code>source /opt/ros/melodic/setup.bash</code> in order to add the ROS environment variable and be able to run ROS command from the shell then try runnign <code>rostopic list</code> to test it is working</li><li>Thanks to the network configuration, a MATLAB instance running in the host environment can connect to the guest <strong>vm</strong> ROS network. One needs to provide the ROS master URI by providing an IP address and a port. The following script in MATLAB would start the connection.</li></ul><pre><code class=language-{matlab} data-lang={matlab}>ipaddress = '192.168.56.1';
rosinit(ipaddress,11311);

% Initializing global node /matlab_global_node_47691 with NodeURI http://192.168.56.1:59106/
</code></pre></div><div class=btn-improve-page><a href=https://github.com/jsduenass/jsduenass.github.io/edit/source/content/posts/MATLAB/index.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/search/ title="Search Results" class="btn btn-outline-info"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>Search Results</div></a></div><div class="col-md-6 next-article"><a href=/posts/data-analysis/datacademy/ title="Datacademy  challenge by Platzi" class="btn btn-outline-info"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Datacademy challenge by Platzi</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a><div class="dropdown languageSelector"><a class="btn dropdown-toggle" href=# id=languageSelector role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><img class=flag src=https://www.countryflags.io/gb/flat/16.png alt=gb>
English</a><div class=dropdown-menu aria-labelledby=languageSelector><a class="dropdown-item nav-link languages-item" href=/es/posts/matlab><img class=flag src=https://www.countryflags.io/es/flat/24.png alt=es>
Spanish</a></div></div></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#resources>Resources</a></li><li><a href=#about-the-system>About the system</a></li><li><a href=#config>Config</a></li><li><a href=#environment-exploration>Environment exploration</a><ul><li><a href=#connect-to-matlab>Connect to MATLAB</a></li></ul></li></ul></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=/#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=/#recent-posts>Recent Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><span>Email:</span> <span>jsduenass@unal.edu.co</span></li></ul></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script><script type=text/javascript src=/js/popper.min.js></script><script type=text/javascript src=/js/bootstrap.min.js></script><script type=text/javascript src=/js/navbar.js></script><script type=text/javascript src=/js/plyr.js></script><script type=text/javascript src=/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script src=/js/single.js></script><script>hljs.initHighlightingOnLoad()</script></body></html>